.custom-md {
  h1 {
    @apply text-3xl;
  }

  h1, h2, h3, h4, h5, h6 {
    .anchor {
      @apply transition -m-0.5 ml-[0.2ch] p-0.5 select-none opacity-0 no-underline !important;

      .anchor-icon {
        @apply mx-[0.45ch] !important;
      }
    }

    &:hover {
      .anchor {
        @apply opacity-100 !important;
      }
    }
  }

  a:not(.no-styling) {
    @apply relative bg-none link font-medium text-[var(--primary)]
    underline decoration-[var(--link-underline)] decoration-1 decoration-dashed underline-offset-4;
    box-decoration-break: clone;
    -webkit-box-decoration-break: clone;
    display: inline-block;

    &:hover, &:active {
      @apply decoration-transparent;
      background: var(--btn-plain-bg-hover);
      border-bottom: 1px dashed var(--link-hover);
      text-decoration: none;
    }
  }

  code {
    @apply bg-[var(--inline-code-bg)] text-[var(--inline-code-color)] px-1 py-0.5 rounded-md overflow-hidden;
  
    font-family: 'JetBrains Mono Variable', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace;
    &:before {
      content:none;
    }
    &:after {
      content:none;
    }
  
    counter-reset: line;
    span.line {
      &:before {
        @apply text-white/25 mr-4 w-4 inline-block;
        content: counter(line);
        counter-increment: line;
        direction: rtl;
      }
      &:last-child:empty, &:last-child:has(> span:empty:only-child) {
        display: none;
      }
    }
  }

  pre code {
    /* Ë¶ÜÁõñ @apply ÈÉ®ÂàÜ */
    background: transparent !important;  /* Êó†ËÉåÊôØ */
    color: inherit !important;  /* ÁªßÊâøÁà∂ÂÖÉÁ¥†È¢úËâ≤ */
    padding: 0 !important;  /* Êó†ÂÜÖËæπË∑ù */
    border-radius: 0 !important;
    overflow: visible !important;  /* ÂÖÅËÆ∏Ê∫¢Âá∫‰ª•‰øùÁïôÊ†ºÂºè */

    /* Â≠ó‰Ωì‰øùÊåÅ monospaceÔºå‰ΩÜÂèØË∞ÉÊï¥ */
    font-family: inherit;  /* Êàñ‰øùÊåÅÂéüÂ≠ó‰Ωì */

    /* ÈáçÁΩÆ‰º™ÂÖÉÁ¥† */
    &:before,
    &:after {
        content: none !important;
    }

    /* Á¶ÅÁî®Ë°åÂè∑ËÆ°Êï∞Âô®ÔºàÈíàÂØπ span.lineÔºâ */
    counter-reset: none !important;
    & span.line:before {
        content: none !important;
        counter-increment: none !important;
        display: none !important;  /* ÈöêËóèË°åÂè∑ */
    }
    & span.line:last-child:empty,
    & span.line:last-child:has(> span:empty:only-child) {
        display: block !important;
    }
  }
  

  .copy-btn {
    all: initial;
    @apply btn-regular-dark opacity-0 shadow-lg shadow-black/50 absolute active:scale-90 h-8 w-8 top-3 right-3 text-sm rounded-lg transition-all ease-in-out z-20 cursor-pointer;
  }
  .frame:hover .copy-btn {
    opacity: 1;
  }

  .copy-btn-icon {
    @apply absolute top-1/2 left-1/2 transition -translate-x-1/2 -translate-y-1/2 w-4 h-4 fill-white pointer-events-none;
  }
  .copy-btn .copy-icon {
    @apply opacity-100 fill-white dark:fill-white/75;
  }
  .copy-btn.success .copy-icon {
    @apply opacity-0 fill-[var(--deep-text)]
  }
  .copy-btn .success-icon {
    @apply opacity-0 fill-white;
  }
  .copy-btn.success .success-icon {
    @apply opacity-100
  }

  .expressive-code {
    @apply my-4;
    ::selection {
      @apply bg-[var(--codeblock-selection)];
    }
  }


  ul, ol {
    li::marker {
      @apply text-[var(--primary)];
    }
  }

  .katex-display-container {
    max-width: 100%;
    overflow-x: auto;
    margin: 1em 0;
  }

  blockquote {
    @apply not-italic border-transparent relative;
    font-weight: inherit;

    &:before {
      @apply content-[''] absolute -left-1 block transition bg-[var(--btn-regular-bg)] h-full w-1 rounded-full;
    }

    /* Remove the double quotes from default styles */
    p:before, p:after {
      @apply content-none;
    }

  }
  /* Âü∫Á°Ä Admonition ÂùóÊ†∑ÂºèÔºàÂÖ±‰∫´ÈÉ®ÂàÜÔºâ */
  blockquote[class*="-block"] {
    @apply not-italic border-transparent relative;
    font-weight: inherit;
    position: relative;
    margin: 1em 0;
    padding: 1em 1.5em 1em 1em;
    border: 1px solid transparent;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  blockquote[class*="-block"]::before {
    @apply absolute block transition;
    content: '';
    left: -1px;
    top: 0;
    bottom: 0;
    width: 6px;
    border-radius: 8px 0 0 8px;
  }

  blockquote[class*="-block"] p:first-child {
    font-weight: bold;
    font-size: 1.1em;
    margin: 0 0 0.5em 1.5em;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* Note Block (ÂéüÊúâ) */
  blockquote.note-block {
    border-color: #007acc;
    background-color: #e3f2fd70;
  }

  blockquote.note-block::before {
    background-color: #007acc;
  }

  blockquote.note-block p:first-child {
    color: #007acc;
  }

  blockquote.note-block::after { /* ‰ΩøÁî® ::after ÈÅøÂÖçÂÜ≤Á™Å */
    content: "üìù";
    @apply absolute;
    left: 0.5em;
    top: 0.5em;
    font-size: 1.2em;
  }

  /* Tip Block */
  blockquote.tip-block {
    border-color: #10b981;
    background-color: #d1fae570;
  }

  blockquote.tip-block::before {
    background-color: #10b981;
  }

  blockquote.tip-block p:first-child {
    color: #10b981;
  }

  blockquote.tip-block::after {
    content: "üí°";
    @apply absolute;
    left: 0.5em;
    top: 0.5em;
    font-size: 1.2em;
  }

  /* Important Block */
  blockquote.important-block {
    border-color: #f59e0b;
    background-color: #fef3c770;
  }

  blockquote.important-block::before {
    background-color: #f59e0b;
  }

  blockquote.important-block p:first-child {
    color: #f59e0b;
  }

  blockquote.important-block::after {
    content: "‚≠ê";
    @apply absolute;
    left: 0.5em;
    top: 0.5em;
    font-size: 1.2em;
  }

  /* Warning Block */
  blockquote.warning-block {
    border-color: #ef4444;
    background-color: #fee2e270;
  }

  blockquote.warning-block::before {
    background-color: #ef4444;
  }

  blockquote.warning-block p:first-child {
    color: #ef4444;
  }

  blockquote.warning-block::after {
    content: "‚ö†Ô∏è";
    @apply absolute;
    left: 0.5em;
    top: 0.5em;
    font-size: 1.2em;
  }

  /* Caution Block */
  blockquote.caution-block {
    border-color: #f59e0b;
    background-color: #fef3c770;
  }

  blockquote.caution-block::before {
    background-color: #f59e0b;
  }

  blockquote.caution-block p:first-child {
    color: #f59e0b;
  }

  blockquote.caution-block::after {
    content: "!";
    @apply absolute flex items-center justify-center;
    left: 0.5em;
    top: 0.5em;
    font-size: 1.2em;
    background-color: #f59e0b;
    color: white;
    width: 1.5em;
    height: 1.5em;
    border-radius: 50%;
    font-weight: bold;
  }

}